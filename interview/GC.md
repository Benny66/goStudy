不同版本Go的GC
GoV1.3- 普通标记清除法，整体过程需要启动STW，效率极低
GoV1.5- 三色标记法， 堆空间启动写屏障
GoV1.8-三色标记法，混合写屏障机制，栈空间不启动，堆空间启动
### GC
自动垃圾回收：运行时识别不在有用的数据并释放它们占用的内存
- 追踪式回收
- - 标记
- - 复制式回收
- 引用计数

三色标记法
开始标记为白色
扫描白色层，是对象，将其置为灰色
扫描灰色层，将其置为黑色，并将对象后面的引用对象置为灰色
重复扫描灰色，重复上一步的操作，直到全部对象置为黑色
将标记为白色的就可以进行清除

强三色不变式：不存在黑色引用到白色的对象
弱三色不变式：黑色引用到白色，需要同时有一个灰色引用白色；或者将黑色降为灰色再引用白色。

插入（写）屏障：
- 改变黑引用白为黑引用为灰，满足强三色不变式；
- 分配在栈上的黑色引用白色对象，则在回收白色之前开启STW暂停保护，对SWT保护内容进行三色标记
- 最后将栈和堆上的白色标记对象清除

删除屏障：
- 被删除的引用对象为白色或灰色，则标记为灰色

混合写屏障
- 栈上的均标记为黑色，GC期间栈上创建的对象均标记为黑色
- 被删除对象标记为灰色
- 被添加对象标记为灰色